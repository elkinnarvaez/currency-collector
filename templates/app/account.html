{% extends "app/base.html" %}
{% block title %}My Account{% endblock %}
{% block content %}
    <div class="my_account">
        <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: rgb(73, 92, 105);">
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/account">Mi cuenta</a>
                    </li>
                    {% if is_admin == True %}
                        <li class="nav-item">
                            <a class="nav-link" href="/collection">Mi colección</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/add_item">Agregar a colección</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/about_me">Acerca de mí</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/add_collector">Agregar nuevo coleccionista</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </nav>
    </div>

    <div class="w3-col m3 profile" style="width: 26%;">
        <!-- Profile -->
        <div class="w3-card w3-round w3-white">
            <div class="w3-container">
                <!-- <h4 style="position: relative; left: 10%;" style="position: relative; left: 10%;">My Profile</h4> -->
                <br>
                <!-- <p style="position: relative; left: 10%;"><img src="{{url_for('static', filename=profile_picture_path)}}" class="w3-circle" style="height:106px;width:106px" alt="Avatar"></p> -->
                <p class="w3-center"><img src="{{profile_picture_path}}" class="w3-circle" style="width:180px" alt="Avatar"></p>
                <!-- <p class="w3-center"><img src="{{url_for('static', filename='/app/images/user_profile_pictures/avatar3.png')}}" class="w3-circle" style="width:180px" alt="Avatar"></p> -->
                <form enctype=multipart/form-data method="post">
                    <input type="file" name="file" style="position: relative; left: 15%;"/>
                    <br>
                    <br>
                    <input type="submit" value="Cambiar imagen" name="change_picture" style="position: relative; left: 30%;"/>
                </form>
                <br>
                <p style="position: relative; left: 10%;"><small>Recomended resolution: 2100 pixels x 2100 pixels</small></p>
                {% if flash_messages_view == 1 %}
                    <div class="messages-account">
                        {% with messages = get_flashed_messages() %}
                            {% if messages %}
                                {% for msg in messages %}
                                    <p>{{msg}}</p>
                                {% endfor %}
                            {% endif %}
                        {% endwith %}
                    </div>
                {% endif %}
                <hr>
                <p><i class="fa fa-pencil fa-fw w3-margin-right w3-text-theme"></i>{{name}}</p>
                <p><i class="fa fa-envelope fa-fw w3-margin-right w3-text-theme"></i>{{email}}</p>
            </div>
        </div>
        <br>
    </div>

    <div class="change_data_container">
        <div class="w3-card w3-round w3-white">
            <div class="w3-container">
                <h3>Cambia los datos de tu perfil</h3>
                <hr>
                <p style="color:#00011a80;">El campo de contraseña actual es obligatorio para cambiar el nombre de usuario y contraseña. Si no quieres modificar la contraseña puedes dejar los campos en blanco.</p>
                <div class="form_change_data">
                    <form method="post">
                        <label>Nombre:</label>
                        <input type="text" name="name">
                        <br>
                        <br>
                        <label>Contraseña actual:</label>
                        <input type="password" name="old_password">
                        <br>
                        <br>
                        <label>Nueva contraseña:</label>
                        <input type="password" name="new_password">
                        <br>
                        <br>
                        <label>Confirme nueva contraseña:</label>
                        <input type="password" name="confirmed_new_password">
                        <br>
                        <br>
                        <br>
                        <input type="submit" value="Modificar" name="change_data" style="position: relative; left:40%;">
                    </form>
                </div>
                <br>
                {% if flash_messages_view == 2 %}
                    <div class="messages-change-data">
                        {% with messages = get_flashed_messages() %}
                            {% if messages %}
                                {% for msg in messages %}
                                    <ul>
                                        <li>{{msg}}</li>
                                    </ul>
                                {% endfor %}
                            {% endif %}
                        {% endwith %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}